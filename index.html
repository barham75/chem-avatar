<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>Ø£ÙØ§ØªØ§Ø± Ø§Ù„Ù…Ø¤ØªÙ…Ø± â€“ Ø±ÙˆØ¨ÙˆØª Ù…Ø³Ø§Ø¹Ø¯</title>

  <style>
    body {
      margin: 0;
      background: #000814;
      color: white;
      font-family: Tahoma;
      text-align: center;
    }

    h1 {
      margin-top: 20px;
    }

    #avatar-container {
      width: 100%;
      height: 500px;
      background: #001d3d;
      border-top: 2px solid #003566;
      border-bottom: 2px solid #003566;
    }

    #question-box {
      margin-top: 25px;
    }

    input {
      width: 60%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      font-size: 18px;
    }

    button {
      padding: 12px 20px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      background: #00b4d8;
      color: white;
      cursor: pointer;
      margin-right: 10px;
    }
  </style>

  <!-- Ù…ÙƒØªØ¨Ø© ReadyPlayerMe Avatar Renderer -->
  <script src="https://unpkg.com/@readyplayerme/visage@latest"></script>
</head>

<body>

  <h1>ğŸ¤– Ø£ÙØ§ØªØ§Ø± Ø§Ù„Ù…Ø¤ØªÙ…Ø± â€“ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h1>
  <p>Ø±ÙˆØ¨ÙˆØª Ù…ØªØ­Ø±Ùƒ ÙŠØ¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„ØªÙƒ</p>

  <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙØ§ØªØ§Ø± -->
  <div id="avatar-container"></div>

  <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
  <div id="question-box">
    <input type="text" id="question" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." />
    <button onclick="askBot()">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>

  <script>
    // ØªØ­Ù…ÙŠÙ„ Ø±ÙˆØ¨ÙˆØª Ø¬Ø§Ù‡Ø² Ù…Ù† ReadyPlayerMe
    const avatarUrl = "https://models.readyplayer.me/65a7a4a3758e2d309f32e3d4.glb"; 
    // (Ù‡Ø°Ø§ Ø±ÙˆØ¨ÙˆØª Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¬Ø§Ù‡Ø² â€” Ù…ØªØ­Ø±Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„)

    // Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙØ§ØªØ§Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ container
    const container = document.getElementById("avatar-container");

    const viewer = new window.RPMVisage.AvatarScene({
      container: container,
      avatarUrl: avatarUrl,
      idleAnimation: true,
      autoRotate: true,
      lipsync: true,
    });

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­Ø¯Ø«
    function speak(text) {
      const synth = window.speechSynthesis;
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "ar-SA";
      synth.speak(utter);
    }

    // Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function askBot() {
      const q = document.getElementById("question").value.trim();
      if (!q) return;

      // ØªØ´ØºÙŠÙ„ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„ÙÙ…
      viewer.playTalkingAnimation();

      // Ø§Ù„Ø±Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø·Ù‡ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ø§Ø­Ù‚Ù‹Ø§)
      let answer = "Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ! Ø³ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ø´ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚ Ù…Ù† Ø®Ù„Ø§Ù„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";

      speak(answer);

      setTimeout(() => viewer.stopTalkingAnimation(), answer.length * 80);
    }
  </script>

</body>
</html>
