<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø¤ØªÙ…Ø± Ø§Ù„Ø¹Ù„Ù…ÙŠ Ù„Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</title>

  <style>
    body {
      margin: 0;
      font-family: Tahoma, Arial, sans-serif;
      direction: rtl;
      background: #020617;
      color: #e5e7eb;
    }

    /* Ù‡ÙŠØ¯Ø± Ø§Ù„Ø´Ø¹Ø§Ø± */
    .top-header {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px 20px;
      background: #020617;
      border-bottom: 1px solid #1e293b;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .top-header img {
      height: 60px;
      border-radius: 10px;
    }

    .top-header .title-block {
      display: flex;
      flex-direction: column;
      color: #e2e8f0;
    }

    .top-header .main-title {
      font-size: 17px;
      font-weight: bold;
    }

    .top-header .sub-title {
      font-size: 12px;
      color: #94a3b8;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    .subtitle {
      text-align: center;
      color: #9ca3af;
      margin-bottom: 30px;
    }

    .icon-row {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      margin-bottom: 30px;
    }

    .icon-card {
      background: #0f172a;
      border-radius: 16px;
      padding: 16px;
      width: 260px;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 15px 30px rgba(0,0,0,0.4);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .icon-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    }

    .icon-emoji {
      font-size: 40px;
      margin-bottom: 8px;
    }

    .section {
      display: none;
      background: #020617;
      padding: 16px;
      border-radius: 16px;
      border: 1px solid #1f2937;
      margin-bottom: 30px;
    }

    .section.active {
      display: block;
    }

    /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø­Ø¶ÙˆØ± */
    .form-row {
      margin-bottom: 10px;
    }

    label {
      display: block;
      margin-bottom: 4px;
    }

    input[type="text"], input[type="email"] {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: none;
      outline: none;
      font-size: 14px;
    }

    button {
      padding: 8px 16px;
      border-radius: 8px;
      border: none;
      background: #22c55e;
      color: #020617;
      font-weight: bold;
      cursor: pointer;
      margin-top: 8px;
    }

    button:disabled {
      opacity: 0.6;
      cursor: default;
    }

    .msg {
      margin-top: 8px;
      font-size: 14px;
    }

    .msg.ok { color: #4ade80; }
    .msg.err { color: #f97373; }

    /* Ø§Ù„Ø£ÙØ§ØªØ§Ø± */
    .avatar-card {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 10px;
    }

    .avatar-face {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      border: 3px solid #22c55e;
      overflow: hidden;
      background: #0b1120;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    }

    .avatar-face img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-face.talking {
      animation: pulse 1s infinite ease-in-out;
      box-shadow: 0 0 15px #22c55e;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    .status {
      font-size: 13px;
      color: #9ca3af;
    }

    .chat-log {
      background: #020617;
      border-radius: 10px;
      padding: 10px;
      height: 220px;
      overflow-y: auto;
      font-size: 14px;
      margin-bottom: 10px;
      border: 1px solid #111827;
    }

    .msg-user   { color: #38bdf8; margin-bottom: 4px; }
    .msg-bot-ar { color: #a5b4fc; margin-bottom: 2px; }
    .msg-bot-en { color: #fbbf24; margin-bottom: 8px; font-size: 13px; }

    .chat-input-row {
      display: flex;
      gap: 8px;
    }

    .chat-input-row input {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      outline: none;
      font-size: 14px;
    }

    /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤ØªÙ…Ø± */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }

    th, td {
      padding: 8px;
      border: 1px solid #1f2937;
      text-align: center;
    }

    th {
      background: #111827;
    }
  </style>
</head>

<body>

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ù…Ø¹ Ø§Ù„Ø´Ø¹Ø§Ø± -->
  <div class="top-header">
    <img src="logo.jpg" alt="Conference Logo">
    <div class="title-block">
      <div class="main-title">Chemistry Horizons â€“ SSC2 2026</div>
      <div class="sub-title">Jerash University â€¢ Second Scientific Conference in Chemistry</div>
    </div>
  </div>

  <div class="container">

    <!-- Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <div class="icon-row">
      <div class="icon-card" onclick="showSection('attendance')">
        <div class="icon-emoji">ğŸ“</div>
        <div><strong>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±</strong></div>
        <div style="font-size:13px;color:#9ca3af;">Ø§Ù„Ø¥Ø³Ù… â€“ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© â€“ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
      </div>

      <div class="icon-card" onclick="showSection('avatar')">
        <div class="icon-emoji">ğŸ¤–</div>
        <div><strong>Ø£ÙØ§ØªØ§Ø± Ø§Ù„Ù…Ø¤ØªÙ…Ø±</strong></div>
        <div style="font-size:13px;color:#9ca3af;">ÙŠØªØ­Ø¯Ø« Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ ØªØ±Ø¬Ù…Ø© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</div>
      </div>

      <div class="icon-card" onclick="showSection('schedule')">
        <div class="icon-emoji">ğŸ“…</div>
        <div><strong>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤ØªÙ…Ø±</strong></div>
        <div style="font-size:13px;color:#9ca3af;">Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆØ±</div>
      </div>
    </div>

    <!-- Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± -->
    <div id="attendance" class="section">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±</h2>

      <div class="form-row">
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input id="name" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ" />
      </div>

      <div class="form-row">
        <label>Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</label>
        <input id="university" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©" />
      </div>

      <div class="form-row">
        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
        <input id="email" type="email" placeholder="example@domain.com" />
      </div>

      <button onclick="registerAttendance()" id="regBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ±</button>
      <div id="regMsg" class="msg"></div>
    </div>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø£ÙØ§ØªØ§Ø± -->
    <div id="avatar" class="section">
      <h2>Ø£ÙØ§ØªØ§Ø± Ø§Ù„Ù…Ø¤ØªÙ…Ø±</h2>

      <div class="avatar-card">
        <div class="avatar-face" id="avatarFace">
          <img src="avatar.jpg" alt="Avatar">
        </div>
        <div>
          <strong>Ø£Ø³ØªØ§Ø° Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</strong>
          <div class="status" id="avatarStatus">
            Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø¤ØªÙ…Ø±ØŒ Ø§Ù„Ù…ØªØ­Ø¯Ø«ÙŠÙ†ØŒ Ø§Ù„Ù…ÙƒØ§Ù†ØŒ Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª...
          </div>
        </div>
      </div>

      <div class="chat-log" id="chatLog"></div>

      <div class="chat-input-row">
        <input id="question" type="text" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ..." />
        <button onclick="askAvatar()" id="askBtn">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
    </div>

    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤ØªÙ…Ø± -->
    <div id="schedule" class="section">
      <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤ØªÙ…Ø±</h2>

      <table>
        <thead>
          <tr>
            <th>Ø§Ù„ÙŠÙˆÙ…</th>
            <th>Ø§Ù„ÙˆÙ‚Øª</th>
            <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
            <th>Ø§Ù„Ù…ØªØ­Ø¯Ø«</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„</td>
            <td>10:00 - 11:00</td>
            <td>Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠØ©</td>
            <td>Ø±Ø¦ÙŠØ³ Ø§Ù„Ù…Ø¤ØªÙ…Ø±</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>

  <script>

    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    showSection('attendance');

    /* ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± */
    async function registerAttendance() {
      const name = document.getElementById('name').value.trim();
      const university = document.getElementById('university').value.trim();
      const email = document.getElementById('email').value.trim();

      if (!name || !university || !email) {
        document.getElementById('regMsg').textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.";
        document.getElementById('regMsg').classList.add('err');
        return;
      }

      const res = await fetch('/register', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({name, university, email})
      });

      const data = await res.json();
      document.getElementById('regMsg').textContent = data.message;
      document.getElementById('regMsg').classList.add('ok');
    }

    /* Ø§Ù„Ø£ÙØ§ØªØ§Ø± */
    const avatarFace = document.getElementById('avatarFace');

    function speakAR(text) {
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "ar-SA";

      avatarFace.classList.add("talking");
      u.onend = () => avatarFace.classList.remove("talking");

      speechSynthesis.speak(u);
    }

    async function askAvatar() {
      const q = document.getElementById('question').value.trim();
      if (!q) return;

      const res = await fetch('/ask', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({question: q})
      });

      const data = await res.json();

      chatLog.innerHTML += `<p class="msg-user">ğŸ‘¤ Ø£Ù†Øª: ${q}</p>`;
      chatLog.innerHTML += `<p class="msg-bot-ar">ğŸ¤– Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©: ${data.answer_ar}</p>`;
      chatLog.innerHTML += `<p class="msg-bot-en">ğŸŒ English: ${data.answer_en}</p>`;

      speakAR(data.answer_ar);
    }

  </script>

</body>
</html>
